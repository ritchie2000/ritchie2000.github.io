---
lang: zh-CN
title: 网络编程
description: sup 02
---

## 网络编程 C/S

直接或间接地通过网络协议与其它计算机进行通讯,实现数据交换，资源共享

- ip地址 cmd  ipconfig

- port端口号 0--65535，0--1023被服务器占用

- Socket套接字

- start（）方法，真正实现了多线程运行，run（）方法只是一个普通方法，称为线程体，start方法会自动调用run方法，run必须是public，返回值void。

127.0.0.1是回送地址，指本地机

TCP提供**面向连接的、可靠的、基于字节流的**传输层通信协议。三次握手四次挥手，一般用于文件传输、发送和接收邮件、远程登录等场景。

UDP是一个无连接的协议，在传送数据之前不需要先建立连接，交付**不可靠**，一般用于即时通信，比如QQ。

TCP三次握手，四次挥手：

1. 传输前,采用"三次握手"方式,是可靠的

  - 第1次 客户端---->服务器端---->客户端
第2次 客户端接收到服务器端返回的消息
第3次 客户端---->服务器端

2. 传输完毕,需释放已建立的连接,“四次挥手”，效率低

  - 第1次 客户端---->服务器端说我要关闭连接了
第2次 服务器端说可以,但是你等我一会,我把剩余的任务做完
第3次 服务器端做完收尾工作之后---->客户端说,我这边结束了,你可以关了
第4次 客户端说OK,我关了

### Socket套接字

通信两端都要有Scoket，服务器端ServerSocket
网络通讯其实就是Socket之间的通信，
Socket允许程序把网络连接当成一个流，数据在两个Socket间通过IO传输

#### 基于Socket编程实现cs（Client-Server）

//服务器端

1.创建服务器端套接字，ServerSocket，端口号
2.accept 服务器调用 ServerSocket 类的 accept() 方法，该方法将一直等待，直到客户端连接到服务器上给定的端口。
3.getInputStream  //输入流
4.FileOutputStream //获取客户端发过来的数据
5.buff缓冲器
6.while:read读,getOutupStream  //响应消息给客户端
7.close关闭

//客户端
1.创建客户端套接字Socket，IP地址+端口号
2.getOutputStream  //输出流
3.FileInputStream //读取本地文件
3.buff缓冲器
4.while:write写
shutdownOutput  //数据发送完毕
getInputStream  //接收服务器端响应的数据
5.close关闭

‍

### UDP

DatagramPacket对象封装了UDP数据报

通过数据报套接字DatagramSocket发送和接收UDP数据报



### URL编程

`URL url = new URL;`

URL的基本结构由5部分组成

<传输协议>://<主机名>:<端口号>/<文件名>